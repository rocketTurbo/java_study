##MySQL数据库考试说明

考试范围：数据库多表查询

题目数量：17道

考试总分：100分

考试时长：150分钟



### 考题（1）

#### 说明

这是一个图书借阅系统的数据库，包含用户表（user）、图书表（book）以及借阅记录（loan）表 。

![](.\files\2019-02-16_002234.png)



#### 数据库准备

1. 创建名为 `mysql_exam` 的数据库。

   ![](.\files\2019-02-16_003539.png)

2. 导入 `mysql/素材/考题1` 文件夹中的数据库脚本。

   ![](.\files\2019-02-16_004125.png)



#### 题目

1. 查询年龄小于 25的学生姓名、学生年龄。（4分）

   ![](.\files\1-1.png)

2. 查询年龄在18-22之间（包含18和22）的学生信息。（4分）

   ![](.\files\1-2.png)

3. 统计学生表中男女的数量分别是多少。（4分）

   ![](.\files\1-3.png)

4. 查询学生的总人数、平均年龄、最小年龄。（4分）

   ![](.\files\1-4.png)

5. 查询借阅过图书的每个学生ID借阅的总次数。（4分）

   ![](.\files\1-5.png)

6. 查询图书名称包含"java"的图书数量。（4分）

   ![](.\files\1-6.png)

7. 查询借阅总次数大于50的学生学号。（5分）

   ![](.\files\1-7.png)

8. 查询借阅了'HTML高级'的学生学号。（5分）

   ![](.\files\1-8.png)

9. 查询没有借阅过图书的学生学号、学生姓名。（5分）

   ![](.\files\1-9.png)

10. 查询借阅过'javaWeb'图书的学生学号、借阅次数。（5分）

    ![](.\files\1-10.png)

11. 查询年龄比"周瑜"大的所有学生姓名、学生年龄。（6分）

    ![](.\files\1-11.png)

12. 查询年龄最大的学生ID、学生姓名，学生年龄。（6分）

    ![](.\files\1-12.png)

13. 查询借阅了图书的学生姓名、借阅的不同图书总数、借阅所有图书总次数。（8分）

    ![](.\files\1-13.png)

14. 查询被借阅的每本图书的图书名称、借阅总次数。（8分）

    ![](.\files\1-14.png)

15. 查询借阅次数最多的图书ID和借阅的总次数。（8分）

    ![](.\files\1-15.png)



### 考题（2）

#### 说明

这是一个权限管理模块的数据库，包含用户表（t_user）、角色表（t_role）以及用户角色中间表（user_role）

![](.\files\2019-02-16_010023.png)

#### 数据库准备

执行下方的sql语句即可。

```sql
# 创建角色表
CREATE TABLE `t_role` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  PRIMARY KEY (`id`)
);

# 插入角色表数据
INSERT INTO `t_role` VALUES ('1001', '老师');
INSERT INTO `t_role` VALUES ('1002', '经理');
INSERT INTO `t_role` VALUES ('1003', '管理员');

# 创建用户表
CREATE TABLE `t_user` (
  `id` varchar(40) NOT NULL,
  `username` varchar(20) NOT NULL,
  PRIMARY KEY (`id`)
);

# 插入用户表数据
INSERT INTO `t_user` VALUES ('u1', 'Tom');
INSERT INTO `t_user` VALUES ('u2', 'Lily');
INSERT INTO `t_user` VALUES ('u3', 'Kimi');

# 创建用户角色中间表
CREATE TABLE `user_role` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` varchar(40) DEFAULT NULL,
  `role_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_user_role_t_role_1` (`role_id`),
  KEY `fk_user_role_t_user_l` (`user_id`),
  CONSTRAINT `fk_user_role_t_role_1` FOREIGN KEY (`role_id`) REFERENCES `t_role` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_user_role_t_user_1` FOREIGN KEY (`user_id`) REFERENCES `t_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
);

# 插入中间表数据
INSERT INTO `user_role` VALUES ('1', 'u1', '1001');
INSERT INTO `user_role` VALUES ('2', 'u1', '1003');
INSERT INTO `user_role` VALUES ('3', 'u2', '1002');
INSERT INTO `user_role` VALUES ('4', 'u3', '1001');
INSERT INTO `user_role` VALUES ('5', 'u3', '1002');
INSERT INTO `user_role` VALUES ('6', 'u3', '1003');
```



#### 题目

1. 查询'Tom'拥有的角色名称。（10分）

   ![](.\files\2-1.png)

2. 查询拥有'管理员'角色的用户名姓名。（10分）

   ![](.\files\2-2.png)

